{"version":3,"sources":["../res/DeviceWatcher.js"],"names":[],"mappings":"AAAA;;AACA,IAAI,SAAS,QAAQ,QAAR,CAAb;AACA,IAAI,SAAS,OAAO,YAAP,EAAb;AACA,IAAI,YAAY,QAAQ,mBAAR,CAAhB;;AAEA,MAAM,aAAN,CAAoB;AAChB,gBAAY,EAAZ,EAAgB;AACZ,aAAK,SAAL,GAAiB,EAAjB;AACA,aAAK,EAAL,GAAU,EAAV;AACA,aAAK,iBAAL,GAAyB,mBAAzB;AACA,aAAK,iBAAL,GAAyB,mBAAzB;AACH;AACD,cAAU;AACN,YAAI,OAAO,IAAX;AACA,eAAO,WAAP,GAAqB,IAArB,CAA0B,UAAS,OAAT,EAAkB;AACxC,gBAAI,MAAM,EAAV;AACA,oBAAQ,OAAR,CAAgB,KAAK;AACjB,oBAAI,IAAJ,CAAS,EAAE,IAAF,CAAT;AACH,aAFD;AAGA,gBAAI,MAAM,UAAU,KAAK,SAAf,EAA0B,GAA1B,CAAV;AACA,iBAAK,SAAL,GAAiB,GAAjB;AACA,gBAAI,OAAO,mBAAP,CAA2B,GAA3B,EAAgC,MAAhC,KAA2C,CAA/C,EAAkD;AAC9C,qBAAK,EAAL,CAAQ,IAAR,CAAa,KAAK,iBAAlB,EAAqC,GAArC;AACH;AACD,iBAAK,EAAL,CAAQ,IAAR,CAAa,KAAK,iBAAlB,EAAqC,EAArC;AACH,SAXD,EAWG,KAXH,CAWS,UAAS,GAAT,EAAc;AACnB,oBAAQ,GAAR,CAAY,GAAZ;AACH,SAbD;AAcH;AAvBe;;AA0BpB,OAAO,OAAP,GAAiB,aAAjB","file":"DeviceWatcher.js","sourcesContent":["'use strict';\nvar adbkit = require('adbkit');\nvar client = adbkit.createClient();\nvar arraydiff = require('./tools/arraydiff');\n\nclass DeviceWatcher {\n    constructor(ep) {\n        this.devicesID = [];\n        this.ep = ep;\n        this.EVENT_LOOP_FINISH = 'EVENT_LOOP_FINISH';\n        this.EVENT_DEVICE_DIFF = 'EVENT_DEVICE_DIFF';\n    }\n    checker() {\n        var self = this;\n        client.listDevices().then(function(devices) {\n            var arr = [];\n            devices.forEach($ => {\n                arr.push($['id'])\n            });\n            var res = arraydiff(self.devicesID, arr);\n            self.devicesID = arr;\n            if (Object.getOwnPropertyNames(res).length !== 0) {\n                self.ep.emit(self.EVENT_DEVICE_DIFF, res);\n            }\n            self.ep.emit(self.EVENT_LOOP_FINISH, '');\n        }).catch(function(err) {\n            console.log(err);\n        })\n    }\n}\n\nmodule.exports = DeviceWatcher;"]}